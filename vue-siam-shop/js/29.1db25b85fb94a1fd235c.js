(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1056:function(e,s,t){},1096:function(e,s,t){"use strict";t(1056)},1168:function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e._self._c;return s("el-row",{staticClass:"container"},[s("el-col",{staticClass:"header",attrs:{span:24}},[s("el-col",{staticClass:"logo",class:e.collapsed?"logo-collapse-width":"logo-width",attrs:{span:10}},[e._v("\n\t\t\t\t"+e._s(e.collapsed?"":e.sysName)+"\n\t\t\t")]),e._v(" "),s("el-col",{attrs:{span:10}},[s("div",[s("span",{staticClass:"tools"},[s("i",{staticClass:"el-icon-menu",on:{click:function(s){return s.preventDefault(),e.collapse.apply(null,arguments)}}})])])]),e._v(" "),s("el-col",{staticClass:"userinfo",attrs:{span:4}},[s("el-dropdown",{attrs:{trigger:"hover"}},[s("span",{staticClass:"el-dropdown-link userinfo-inner"},[s("img",{attrs:{src:this.sysUserAvatar}}),e._v(" \n            \t\t\t"+e._s(e.sysUserName)+"\n\t\t\t\t\t")]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(s){return e.goAccountInfo.apply(null,arguments)}}},[e._v("账户信息")]),e._v(" "),s("el-dropdown-item",{nativeOn:{click:function(s){return e.showDialog.apply(null,arguments)}}},[e._v("修改密码")]),e._v(" "),s("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(s){return e.logout.apply(null,arguments)}}},[e._v("退出登录")])],1)],1)],1),e._v(" "),s("el-col",{staticClass:"userinfo",attrs:{span:4}},[s("el-dropdown",{attrs:{trigger:"hover"}},[s("span",{staticClass:"el-dropdown-link userinfo-inner",staticStyle:{"font-weight":"bolder"}},[e._v("\n            \t\t\t开关设置\n\t\t\t\t\t")]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("span",{staticStyle:{"font-size":"15px"}},[e._v("营业状态：")]),e._v(" "),s("el-switch",{staticClass:"demo",attrs:{"active-color":"#1890ff","active-text":"营业","inactive-color":"rgba(0,0,0,.25)","inactive-text":"打烊"},nativeOn:{click:function(s){return e.changeIsOperating.apply(null,arguments)}},model:{value:e.isOperating,callback:function(s){e.isOperating=s},expression:"isOperating"}})],1),e._v(" "),s("el-dropdown-item",[s("span",{staticStyle:{"font-size":"15px"}},[e._v("订单语音提醒：")]),e._v(" "),s("el-switch",{staticClass:"demo",attrs:{"active-color":"#1890ff","active-text":"开启","inactive-color":"rgba(0,0,0,.25)","inactive-text":"关闭"},nativeOn:{click:function(s){return e.changeIsOpenOrderAudio.apply(null,arguments)}},model:{value:e.isOpenOrderAudio,callback:function(s){e.isOpenOrderAudio=s},expression:"isOpenOrderAudio"}})],1),e._v(" "),s("el-dropdown-item",[s("span",{staticStyle:{"font-size":"15px"}},[e._v("本地打印：")]),e._v(" "),s("el-switch",{staticClass:"demo",attrs:{"active-color":"#1890ff","active-text":"开启","inactive-color":"rgba(0,0,0,.25)","inactive-text":"关闭"},nativeOn:{click:function(s){return e.changeIsOpenLocalPrint.apply(null,arguments)}},model:{value:e.isOpenLocalPrint,callback:function(s){e.isOpenLocalPrint=s},expression:"isOpenLocalPrint"}})],1),e._v(" "),s("el-dropdown-item",[s("span",{staticStyle:{"font-size":"15px"}},[e._v("云打印：")]),e._v(" "),s("el-switch",{staticClass:"demo",attrs:{"active-color":"#1890ff","active-text":"开启","inactive-color":"rgba(0,0,0,.25)","inactive-text":"关闭"},nativeOn:{click:function(s){return e.changeIsOpenCloudPrint.apply(null,arguments)}},model:{value:e.isOpenCloudPrint,callback:function(s){e.isOpenCloudPrint=s},expression:"isOpenCloudPrint"}})],1)],1)],1)],1)],1),e._v(" "),s("el-col",{staticClass:"main",attrs:{span:24}},[s("aside",{class:e.collapsed?"menu-collapsed":"menu-expanded"},[e.collapsed?s("ul",{ref:"menuCollapsed",staticClass:"el-menu collapsed"},e._l(e.routerArr,(function(t,o){return t.hidden?e._e():s("li",{key:o,staticClass:"el-submenu item"},[t.leaf?[s("li",{staticClass:"el-submenu"},[s("div",{staticClass:"el-submenu__title el-menu-item",class:e.$route.path==t.children[0].path?"is-active":"",staticStyle:{"padding-left":"20px",height:"56px","line-height":"56px",padding:"0 20px"},on:{click:function(s){return e.$router.push(t.children[0].path)}}},[s("i",{class:t.iconCls})])])]:[s("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"},on:{mouseover:function(s){return e.showMenu(o,!0)},mouseout:function(s){return e.showMenu(o,!1)}}},[s("i",{class:t.iconCls})]),e._v(" "),s("ul",{staticClass:"el-menu submenu",class:"submenu-hook-"+o,on:{mouseover:function(s){return e.showMenu(o,!0)},mouseout:function(s){return e.showMenu(o,!1)}}},e._l(t.children,(function(t){return t.hidden?e._e():s("li",{key:t.path,staticClass:"el-menu-item",class:e.$route.path==t.path?"is-active":"",staticStyle:{"padding-left":"40px"},on:{click:function(s){return e.$router.push(t.path)}}},[e._v(e._s(t.name))])})),0)]],2)})),0):s("el-menu",{attrs:{"default-active":e.$route.path,"unique-opened":"",router:""},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},[e._l(e.routerArr,(function(t,o){return t.hidden?e._e():[t.leaf?e._e():s("el-submenu",{key:o,attrs:{index:o+""}},[s("template",{slot:"title"},[s("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,(function(t){return t.hidden?e._e():s("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])}))],2),e._v(" "),t.leaf&&t.children.length>0?s("el-menu-item",{key:o,attrs:{index:t.children[0].path}},[s("i",{class:t.iconCls}),e._v(e._s(t.children[0].name))]):e._e()]}))],2)],1),e._v(" "),s("section",{staticClass:"content-container"},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[s("strong",{staticClass:"title"},[e._v(e._s(e.$route.name))]),e._v(" "),s("el-breadcrumb",{staticClass:"breadcrumb-inner",attrs:{separator:"/"}},e._l(e.$route.matched,(function(t){return s("el-breadcrumb-item",{key:t.path},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t")])})),1)],1),e._v(" "),s("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view")],1)],1)],1)])]),e._v(" "),s("el-dialog",{staticClass:"changePassword",attrs:{title:"修改密码",center:!0,visible:e.changePasswordForm,"close-on-click-modal":!1},on:{"update:visible":function(s){e.changePasswordForm=s},close:function(s){return e.closeDialog("passwordForm")}}},[s("el-form",{ref:"passwordForm",staticClass:"changePassform",attrs:{model:e.passwordForm,"label-width":"150px",rules:e.editFormRules}},[s("el-form-item",{attrs:{label:"旧密码：",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码只包含数字、字母组成。"},model:{value:e.passwordForm.oldPassword,callback:function(s){e.$set(e.passwordForm,"oldPassword",s)},expression:"passwordForm.oldPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码只包含数字、字母组成。"},model:{value:e.passwordForm.newPassword,callback:function(s){e.$set(e.passwordForm,"newPassword",s)},expression:"passwordForm.newPassword"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(s){e.changePasswordForm=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(s){return e.passwordSubmit.apply(null,arguments)}}},[e._v("提交")])],1)],1)],1)};o._withStripped=!0;var r={data(){var e=(e,s,t)=>{/^[a-z0-9]+$/i.test(s)?t():"password"===e.fullField?t(new Error("密码只包含数字、字母组成。")):t(new Error("用户名只包含数字、字母组成。"))};return{isOperating:!1,isOpenOrderAudio:!1,isOpenLocalPrint:!1,isOpenCloudPrint:!1,sysName:"暹罗点餐-商家中心",collapsed:!1,sysUserName:"",sysUserAvatar:"https://siam-hangzhou.oss-cn-hangzhou.aliyuncs.com/data/images/system/logo.png",form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},changePasswordForm:!1,passwordForm:{oldPassword:"",newPassword:""},editFormRules:{oldPassword:[{required:!0,validator:e,trigger:"blur"}],newPassword:[{required:!0,validator:e,trigger:"blur"}]},logining:!1,routerArr:[]}},methods:{changeIsOperating(){let e=this,s={};var t=sessionStorage.getItem("user");t=JSON.parse(t),s.id=t.shopId,s.isOperating=e.isOperating;e.$http.post(e,"/rest/merchant/shop/update",s,(e,s)=>{e.$message({showClose:!0,message:s.message,type:"success"}),this.refreshUserInfo()},(s,t)=>{e.$message({showClose:!0,message:t.message,type:"error"})})},changeIsOpenOrderAudio(){let e=this,s={};var t=sessionStorage.getItem("user");t=JSON.parse(t),s.id=t.shopId,s.isOpenOrderAudio=e.isOpenOrderAudio;e.$http.post(e,"/rest/merchant/shop/update",s,(e,s)=>{e.$message({showClose:!0,message:s.message,type:"success"}),this.refreshUserInfo()},(s,t)=>{e.$message({showClose:!0,message:t.message,type:"error"})})},changeIsOpenLocalPrint(){let e=this,s={};var t=sessionStorage.getItem("user");t=JSON.parse(t),s.id=t.shopId,s.isOpenLocalPrint=e.isOpenLocalPrint;e.$http.post(e,"/rest/merchant/shop/update",s,(e,s)=>{e.$message({showClose:!0,message:s.message,type:"success"}),this.refreshUserInfo()},(s,t)=>{e.$message({showClose:!0,message:t.message,type:"error"})})},changeIsOpenCloudPrint(){let e=this,s={};var t=sessionStorage.getItem("user");t=JSON.parse(t),s.id=t.shopId,s.isOpenCloudPrint=e.isOpenCloudPrint;e.$http.post(e,"/rest/merchant/shop/update",s,(e,s)=>{e.$message({showClose:!0,message:s.message,type:"success"}),this.refreshUserInfo()},(s,t)=>{e.$message({showClose:!0,message:t.message,type:"error"})})},refreshUserInfo(){var e=sessionStorage.getItem("token");this.$http.post(this,"/rest/merchant/getLoginMerchantInfo",{token:e},(e,s)=>{let t=s.data;sessionStorage.setItem("user",JSON.stringify(t))},(e,s)=>{})},goAccountInfo(){this.$router.push({path:"accountInfo"})},showDialog(){this.changePasswordForm=!0},passwordSubmit(){let e=this;this.$refs.passwordForm.validate(s=>{if(!s)return console.log("error submit!!"),!1;{if(e.passwordForm.newPassword.length<6)return e.$message({showClose:!0,message:"密码长度最少6位",type:"error"}),!1;e.logining=!0;let s={oldPassword:e.$utils.Base64(e.passwordForm.oldPassword),newPassword:e.$utils.Base64(e.passwordForm.newPassword)};e.$http.post(e,"/rest/merchant/updatePassword",s,(e,s)=>{e.logining=!1,e.$message({showClose:!0,message:s.message,type:"success"}),e.changePasswordForm=!1,e.$router.push({path:"/login"})},(s,t)=>{e.logining=!1,e.$message({showClose:!0,message:t.message,type:"error"})})}})},closeDialog(e){this.$refs[e].resetFields()},handleopen(){},handleclose(){},handleselect:function(e,s){},logout:function(){var e=this;this.$confirm("确认退出吗?","提示",{}).then(()=>{e.$http.post(e,"/rest/merchant/logout",{},(function(e,s){sessionStorage.removeItem("user"),e.$router.push("/login")}),(function(s,t){e.$message({showClose:!0,message:t.message,type:"error"})}))}).catch(()=>{})},collapse:function(){this.collapsed=!this.collapsed},showMenu(e,s){this.$refs.menuCollapsed.getElementsByClassName("submenu-hook-"+e)[0].style.display=s?"block":"none"},formatRouter(){return this.$router.options.routes.filter((function(e){return"seller"==e.menuRole}))}},mounted(){this.routerArr=this.$router.options.routes;var e=sessionStorage.getItem("user");e&&(e=JSON.parse(e),this.sysUserName=e.shopName||"",this.sysUserAvatar="https://siam.oss-cn-hangzhou.aliyuncs.com/"+e.shopLogoImg,e.issaler&&(this.routerArr=this.formatRouter()));var s=this;s.$http.post(s,"/rest/merchant/shop/getLoginMerchantShopInfo",{},(e,s)=>{let t=s.data;this.isOperating=t.isOperating,this.isOpenOrderAudio=t.isOpenOrderAudio,this.isOpenLocalPrint=t.isOpenLocalPrint,this.isOpenCloudPrint=t.isOpenCloudPrint},(e,t)=>{s.$message({showClose:!0,message:t.message,type:"error"})})}},a=(t(1096),t(275)),n=Object(a.a)(r,o,[],!1,null,"6a5c015e",null);s.default=n.exports}}]);