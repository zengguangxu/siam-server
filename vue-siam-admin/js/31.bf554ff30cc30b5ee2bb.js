(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1033:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},1171:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("section",[t("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[t("el-form",{attrs:{inline:!0,model:e.searchMsg,size:"small"}},[t("el-form-item",[t("el-input",{attrs:{clearable:"",placeholder:"请输入用户名"},model:{value:e.searchMsg.username,callback:function(t){e.$set(e.searchMsg,"username",t)},expression:"searchMsg.username"}})],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{clearable:"",placeholder:"请输入手机号搜索"},model:{value:e.searchMsg.mobile,callback:function(t){e.$set(e.searchMsg,"mobile",t)},expression:"searchMsg.mobile"}})],1),e._v(" "),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择用户类型搜索",clearable:""},model:{value:e.searchMsg.type,callback:function(t){e.$set(e.searchMsg,"type",t)},expression:"searchMsg.type"}},[t("el-option",{attrs:{label:"普通用户",value:1}}),e._v(" "),t("el-option",{attrs:{label:"VIP会员",value:2}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:""}},[t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.searchMsg.createTime,callback:function(t){e.$set(e.searchMsg,"createTime",t)},expression:"searchMsg.createTime"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList(1)}}},[e._v("查询")])],1)],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"highlight-current-row":"","cell-style":e.cellStyle,"header-cell-style":e.headerCellStyle}},[t("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"类型",formatter:e.formatType}}),e._v(" "),t("el-table-column",{attrs:{prop:"vipNo",label:"会员编号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"balance",label:"余额"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(i.row.balance)+"元")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"points",label:"积分"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(i.row.points)+"个")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"createTime",label:"注册时间",formatter:e.formatTime,width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"lastLoginTime",label:"最后登录时间",formatter:e.formatTime,width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"lastUseTime",label:"最后使用小程序的时间",formatter:e.formatTime,width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"lastUseAddress",label:"最后使用小程序的定位地址",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEdit(i.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),t("el-col",{staticClass:"toolbar",attrs:{span:24}},[t("el-pagination",{staticStyle:{float:"right"},attrs:{"page-sizes":[10,20,50,100],"page-size":e.searchMsg.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),t("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.nickname,callback:function(t){e.$set(e.editForm,"nickname",t)},expression:"editForm.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否禁用",prop:"isDisabled"}},[t("el-radio-group",{attrs:{size:"medium"},model:{value:e.editForm.isDisabled,callback:function(t){e.$set(e.editForm,"isDisabled",t)},expression:"editForm.isDisabled"}},[t("el-radio-button",{attrs:{label:"启用",value:"0"}}),e._v(" "),t("el-radio-button",{attrs:{label:"禁用",value:"1"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.editSubmit.apply(null,arguments)}}},[e._v("提交")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"会员管理",visible:e.editFormVisible2,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible2=t}}},[t("el-form",{ref:"editForm2",staticStyle:{width:"60%"},attrs:{model:e.editForm2,"label-width":"150px",rules:e.editForm2Rules}},[t("el-form-item",{attrs:{label:"充值时长(月)",prop:"rechargeTime"}},[t("el-input-number",{attrs:{min:0},model:{value:e.editForm2.rechargeTime,callback:function(t){e.$set(e.editForm2,"rechargeTime",t)},expression:"editForm2.rechargeTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"充值费用",prop:"amount"}},[t("el-input",{model:{value:e.editForm2.amount,callback:function(t){e.$set(e.editForm2,"amount",t)},expression:"editForm2.amount"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.editFormVisible2=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.editSubmit2.apply(null,arguments)}}},[e._v("提交")])],1)],1)],1)};a._withStripped=!0;i(1033);var s={data:()=>({pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近两周",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-12096e5),e.$emit("pick",[i,t])}},{text:"最近一月",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三月",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-7776e6),e.$emit("pick",[i,t])}},{text:"最近半年",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-15552e6),e.$emit("pick",[i,t])}},{text:"最近一年",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-31104e6),e.$emit("pick",[i,t])}},{text:"最近两年",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-62208e6),e.$emit("pick",[i,t])}},{text:"最近三年",onClick(e){const t=new Date;let i=new Date;i.setTime(t.getTime()-93312e6),e.$emit("pick",[i,t])}}]},searchMsg:{pageNo:1,pageSize:20},list:[],total:0,listLoading:!1,editFormVisible:!1,editFormVisible2:!1,editForm:{username:"",mobile:"",nickname:"",inviteCode:"",isDisabled:"",isDelete:"",type:""},editForm2:{memberId:""},editForm2Rules:{rechargeTime:[{required:!0,message:"请输入充值时长",trigger:"blur"}],amount:[{required:!0,message:"请输入充值费用",trigger:"blur"}]},timer:null}),methods:{cellStyle:({row:e,column:t,rowIndex:i,columnIndex:a})=>"text-align:center",headerCellStyle:({row:e,rowIndex:t})=>"text-align:center",formatTime(e,t){let i=new Date(e[t.property]),a=this.$utils.formatDate(i,"yyyy-MM-dd hh:mm:ss");return"1970-01-01"==a&&(a="-"),a},formatisDisabledType:(e,t)=>0==e.isDisabled?"启用":"禁用",formatDeleteType:(e,t)=>0==e.isDelete?"未删除":"已删除",formatType:(e,t)=>1==e.type?"普通用户":2==e.type?"VIP会员":"-",getList(e){e&&(this.searchMsg.pageNo=e);let t=this,i=Object.assign({},t.searchMsg);if(t.searchMsg.createTime){let e=t.searchMsg.createTime[0],a=t.searchMsg.createTime[1];i.startCreateTime=this.$utils.formatDate(new Date(e),"yyyy/MM/dd hh:mm:ss"),i.endCreateTime=this.$utils.formatDate(new Date(a),"yyyy/MM/dd hh:mm:ss"),delete i.createTime}t.listLoading=!0,t.$http.post(t,"/rest/admin/member/list",i,(e,t)=>{e.listLoading=!1,e.list=t.data.records,e.total=t.data.total},(e,i)=>{t.listLoading=!1,t.$message({showClose:!0,message:i.message,type:"error"})})},editSubmit(){this.$refs.editForm.validate(e=>{if(e){let e=this,t=Object.assign({},e.editForm);t.isDisabled="启用"==t.isDisabled?0:1,e.$http.post(e,"/rest/admin/member/update",t,(e,t)=>{e.$message({showClose:!0,message:t.message,type:"success"}),e.getList(),e.$refs.editForm.resetFields(),e.editFormVisible=!1},(t,i)=>{e.editFormVisible=!1,e.$message({showClose:!0,message:i.message,type:"error"})})}})},editSubmit2(){this.$refs.editForm2.validate(e=>{if(e){let e=this,t=Object.assign({},e.editForm2);e.$http.post(e,"/rest/admin/vipRechargeRecord/updateVip",t,(e,t)=>{e.$message({showClose:!0,message:t.message,type:"success"}),e.getList(),e.$refs.editForm2.resetFields(),e.editFormVisible2=!1},(t,i)=>{e.editFormVisible2=!1,e.$message({showClose:!0,message:i.message,type:"error"})})}})},handleEdit(e){this.editFormVisible=!0,this.editForm.id=e.id,this.editForm.username=e.username,this.editForm.mobile=e.mobile,this.editForm.nickname=e.nickname,this.editForm.inviteCode=e.inviteCode,this.editForm.isDisabled=0==e.isDisabled?"启用":"禁用",this.editForm.type=e.type},handleRechargeVip(e){this.editFormVisible2=!0,this.editForm2.memberId=e.id},handleSizeChange(e){this.searchMsg.pageSize=e,this.getList()},handleCurrentChange(e){this.searchMsg.pageNo=e,this.getList()}},mounted(){this.getList(),this.$orderPrint.init()}},r=i(276),l=Object(r.a)(s,a,[],!1,null,"436ac326",null);t.default=l.exports}}]);